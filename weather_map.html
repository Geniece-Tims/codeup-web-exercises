<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>Weather App</title>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css' rel='stylesheet'/>
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js'></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" href="css/weather_map.css">
</head>


<body>
<script src="js/keys.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha38 -geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"></script>
    <!--main background-->
<div class="container" id="card-title-year">
    <div class="header-container">
        <span class="left">Weather Dashboard</span>
        <span class="right">2023</span>
    </div>
<!--main body card-->
    <div class="weather-container">
        <div class="row">
            <div class="col-12">
                <div class="card text-bg-dark">
                    <img src="images/clouds.jpg" class="card-img" alt="A single cloud in the sky">
                        <div class="card-img-overlay text-light">
                            <!--Main body is pauses-->
                            <!--This is where the side panel/search bar starts-->
                            <div class="sidebar-container position-absolute top-0 start-0">
                                <div class="col-5 border-white-opacity">
                                    <div class="card bg-transparent">
                                        <div class="card-text-overlay text-dark">
                                            <nav class="navbar bg-transparent">
                                                <form class="d-flex" role="search">
                                                    <div id='city-search' class="d-flex align-items-center w-100">
                                                        <span class="icon-container">
                                                            <img src="images/thermometer.svg" alt="thermometer icon">
                                                        </span>
                                                        <input id="location-input" type="text" placeholder="Search for a city.." class="w-100">
                                                        <span class="icon-container">
                                                            <img src="images/search.svg" alt="search icon">
                                                        </span>
                                                    </div>
                                                </form>
                                            </nav>
                                            <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                                            <p class="card-text"><small>Last updated 3 mins ago</small></p>
                                            <p>Something goes here</p>
                                            <p>Something goes here</p>
                                            <p>Something goes here</p>
                                            <p>Something goes here</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <!--This is where the side panel/search bar ends-->
                        <!--Main body content continues here-->
                            <div class="main-body-content position-absolute top-0 start-50 translate-middle-x main-body-right">
                                <div class="main-body-header">
                                    <span class="title">NATIONAL</span>
                                    <span class="title">WEATHER</span>
                                </div>
                                <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
                                <p class="card-text"><small>Last updated 3 mins ago</small></p>
                            </div>
                        </div>
                    <script>
                        // API endpoint and parameters
                        const apiUrl = 'https://api.openweathermap.org/data/2.5/weather';
                        const apiKey = weatherMapKey;
                        const city = 'Dallas';

                        $.ajax("https://api.openweathermap.org/data/2.5/onecall?lat={lat}&lon={lon}&exclude={part}&appid={API key}", {
                            data: {
                                APPID: apiKey,
                                q: "Dallas, US"
                            }
                        });


                        // Construct the API URL with parameters
                        const apiUrlWithParams = `${apiUrl}?q=${city}&appid=${apiKey}`;

                        // Make the API request
                        fetch(apiUrlWithParams)
                            .then(response => response.json())
                            .then(data => {
                                // Extract relevant weather information from the API response
                                const temperature = data.main.temp;
                                const weatherDescription = data.weather[0].description;

                                // Update the DOM with the weather information
                                const weatherContainer = document.getElementById('weather-container');
                                weatherContainer.innerHTML = `<p>Temperature: ${temperature}°C</p>
                                                              <p>Description: ${weatherDescription}</p>`;
                            })
                            .catch(error => {
                                console.log('Error:', error);
                            });
                    </script>
                </div>
            </div>
        </div>
    </div>
    <div class="card-footer">
        <span class="bottom left">17°</span>
        <span class="bottom right">National Weather Group</span>
    </div>

    <!--where the card begins for side panel content and main body content-->
</div>
</body>
</html>
